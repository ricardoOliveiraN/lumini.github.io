<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    ENDEREÇO
    <input type="number" name="" id="inp_cep"><br>
    <input type="text" name="" id="inp_uf"><br>
    <input type="text" name="" id="inp_cidade"><br>
    <input type="text" name="" id="inp_logradouro"><br>
    <input type="number" name="" id="inp_numero"><br>
    <input type="text" name="" id="inp_complemento"><br>
    <button onclick="cadastrarEndereco()">Endereço</button>


    <h1>Graphics</h1>
    <div style="display: flex;">
        <div style="width: 50%;">
            <canvas id="sensorAnalogico"></canvas>
        </div>


    </div>


    <script>
        var sensorAnalogico = new Chart(document.getElementById('sensorAnalogico').getContext('2d'), {
            type: 'line',
            data: {
                datasets: [{
                    label: 'Analogico',
                    borderColor: '#63B1BC',
                    backgroundColor: '#ED145B'
                }]
            },
            options: {
                scales: {
                    x: {
                        beginAtZero: true
                    },
                    y: {
                        title: {
                            display: true,
                            text: '(%)'
                        },
                        beginAtZero: true,
                    },
                },
            }
        })


        var paginacao = {};
        var tempo = {};


        function obterDados(grafico, endpoint) {
            fetch('http://localhost:3300/sensores/' + endpoint)
                .then(response => response.json())
                .then(valores => {
                    if (paginacao[endpoint] == null) {
                        paginacao[endpoint] = 0;
                    }
                    if (tempo[endpoint] == null) {
                        tempo[endpoint] = 0;
                    }


                    var ultimaPaginacao = paginacao[endpoint];
                    paginacao[endpoint] = valores.length;
                    valores = valores.slice(ultimaPaginacao);


                    valores.forEach((valor) => {
                        if (grafico.data.labels.length == 10 && grafico.data.datasets[0].data.length == 10) {
                            grafico.data.labels.shift();
                            grafico.data.datasets[0].data.shift();
                        }


                        grafico.data.labels.push(tempo[endpoint]++);
                        grafico.data.datasets[0].data.push(parseFloat(valor));
                        grafico.update();
                    });
                })
                .catch(error => console.error('Erro ao obter dados:', error));
        }


        setInterval(() => {
            obterDados(sensorAnalogico, 'analogico')
        }, 1000);


    </script>


    EMPRESA
    <input type="text" id="inp_nomeFantasia"><br>
    <input type="number" id="inp_cnpj"><br>
    <input type="text" id="inp_tamanhoEmpresa"><br>
    <input type="number" id="inp_qtdHectare"><br>
    <input type="text" id="inp_statusCadastro"><br>
    <input type="text" id="inp_dataCriacao"><br>
    <button onclick="cadastrarEmpresa()">Empresa Cadastrar </button>
    
</body>
</html>
<script src="js/CadastrarEmpresa.js"></script>